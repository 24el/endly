{
  "Name": "maven",
  "Sdk": "$build.sdk",
  "SdkVersion": "$build.sdkVersion",
  "Goals": [
    {
      "Name": "build",
      "Command": {
        "Options": {
          "Directory": "$build.target",
          "TimeoutMs": 720000
        },
        "Executions": [
          {
            "Command": "cd $build.target"
          },
          {
            "Command": "mvn clean $build.args",
            "Errors": [
              "Error",
              "command not found"
            ]
          },
          {
            "Command": "mvn clean $build.args",
            "Errors": [
              "Error",
              "command not found"
            ]
          },
          {
            "Command": "mvn $build.goal $build.args",
            "Success": [
              "BUILD SUCCESS"
            ],
            "Extraction": [
              {
                "Key": "Artifact",
                "RegExpr": "Building jar:[^\/]+(.+)"
              }
            ]
          }
        ]
      }
    }
  ],
  "BuildDeployments": [
    {
      "Deploy": {
        "AppName": "maven",
        "Pre": {
          "Commands": [
            "mkdir -p /tmp/local"
          ]
        },
        "Transfer": {
          "Source": {
            "URL": "http://mirrors.gigenet.com/apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.tar.gz"
          },
          "Target": {
            "Name": "apache-maven",
            "Version": "3.5.2",
            "URL": "scp://$build.host/tmp/local/",
            "Credential": "$build.credential"
          }
        },
        "VersionCheck": {
          "Options": {
            "SystemPaths": [
              "/tmp/local/maven/bin"
            ]
          },
          "Executions": [
            {
              "Command": "mvn -version",
              "Extraction": [
                {
                  "Key": "Version",
                  "RegExpr": "Apache Maven (\\d+\\.\\d+\\.\\d+)"
                }
              ]
            }
          ]
        },
        "Command": {
          "Options": {
            "Directory": "/tmp/local/"
          },
          "Executions": [
            {
              "Command": "tar xvzf apache-maven-3.5.2-bin.tar.gz",
              "Error": [
                "Error"
              ]
            },
            {
              "Command": "mv apache-maven-3.5.2 maven",
              "Error": [
                "No"
              ]
            }
          ]
        }
      }
    }
  ]
}