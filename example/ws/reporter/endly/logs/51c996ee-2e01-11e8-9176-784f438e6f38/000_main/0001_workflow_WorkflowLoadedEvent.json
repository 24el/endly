{
	"Workflow": {
		"Source": {
			"URL": "file:///Projects/go/workspace/src/github.com/viant/endly/example/ws/reporter/endly/manager.csv",
			"Credentials": "",
			"Cache": "",
			"CacheExpiryMs": 0
		},
		"Data": null,
		"Name": "manager",
		"Description": "run system test",
		"Init": [
			{
				"Name": "sdk",
				"Value": "go:1.8",
				"From": "params.sdk",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "GOPATH",
				"Value": "${env.GOPATH}",
				"From": "params.GOPATH",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "target",
				"Value": {
					"Credentials": "localhost",
					"URL": "ssh://127.0.0.1/"
				},
				"From": "params.target",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "serviceTarget",
				"Value": "$target",
				"From": "params.serviceTarget",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "buildTarget",
				"Value": "$target",
				"From": "params.buildTarget",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "appTarget",
				"Value": "$target",
				"From": "params.appTarget",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "origin",
				"Value": {
					"URL": "/Projects/go/workspace/src/github.com/viant/endly/example/ws/reporter"
				},
				"From": "params.origin",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "app",
				"Value": "reporter",
				"From": "params.app",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "buildPath",
				"Value": "/tmp/${app}/build/",
				"From": "params.buildPath",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "releasePath",
				"Value": "/tmp/${app}/release",
				"From": "params.buildRoot",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "appPath",
				"Value": "/opt/${app}",
				"From": "params.appPath",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "mysqlVersion",
				"Value": "5.7",
				"From": "params.mysqlVersion",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			},
			{
				"Name": "mysqlCredential",
				"Value": "mysql",
				"From": "params.mysqlCredential",
				"When": "",
				"Else": null,
				"Persist": false,
				"Required": true,
				"Replace": null
			}
		],
		"Post": null,
		"Tasks": [
			{
				"When": "",
				"Seq": 0,
				"Name": "init",
				"Description": "Initialise test",
				"Actions": [
					{
						"Service": "workflow",
						"Action": "run",
						"Request": {
							"pipeline": [
								{
									"Key": "create-db",
									"Value": [
										{
											"Key": "action",
											"Value": "dsunit:register"
										},
										{
											"Key": "datastore",
											"Value": "db1"
										},
										{
											"Key": "recreate",
											"Value": true
										},
										{
											"Key": "scripts",
											"Value": [
												[
													{
														"Key": "URL",
														"Value": "datastore/db1/schema.ddl"
													}
												]
											]
										},
										{
											"Key": "config",
											"Value": [
												{
													"Key": "driverName",
													"Value": "mysql"
												},
												{
													"Key": "descriptor",
													"Value": "[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true"
												},
												{
													"Key": "credentials",
													"Value": "$mysqlCredential"
												}
											]
										},
										{
											"Key": "admin",
											"Value": [
												{
													"Key": "datastore",
													"Value": "mysql"
												},
												{
													"Key": "config",
													"Value": [
														{
															"Key": "driverName",
															"Value": "mysql"
														},
														{
															"Key": "descriptor",
															"Value": "[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true"
														},
														{
															"Key": "credentials",
															"Value": "$mysqlCredential"
														}
													]
												}
											]
										}
									]
								},
								{
									"Key": "populate",
									"Value": [
										{
											"Key": "action",
											"Value": "dsunit:prepare"
										},
										{
											"Key": "datastore",
											"Value": "db1"
										},
										{
											"Key": "URL",
											"Value": "datastore/db1/dictionary"
										}
									]
								}
							]
						},
						"Description": "initialise datastores",
						"Tag": "Init",
						"TagIndex": "",
						"TagID": "manager_Init",
						"TagDescription": "",
						"When": "",
						"Skip": "",
						"Name": "",
						"Init": null,
						"Post": null,
						"Async": false
					}
				],
				"Init": null,
				"Post": null,
				"TimeSpentMs": 0
			},
			{
				"When": "",
				"Seq": 0,
				"Name": "test",
				"Description": "Run test",
				"Actions": [
					{
						"Service": "workflow",
						"Action": "run",
						"Request": {
							"Name": "regresion",
							"Params": {
								"GOPATH": "$GOPATH",
								"appRootDirectory": "$appRootDirectory",
								"buildArgs": "$buildArgs",
								"buildDirectory": "$buildDirectory",
								"buildGoal": "$buildGoal",
								"buildHost": "$buildHost",
								"buildHostCredential": "$buildHostCredential",
								"goVersion": "$goVersion",
								"localHostCredential": "$localHostCredential",
								"mysqlCredential": "$mysqlCredential",
								"mysqlPort": "$mysqlPort",
								"mysqlVersion": "$mysqlVersion",
								"targetHost": "$targetHost",
								"targetHostCredential": "$targetHostCredential"
							},
							"Tasks": "*",
							"URL": "regresion/regresion.csv"
						},
						"Description": "run test plan",
						"Tag": "Test",
						"TagIndex": "",
						"TagID": "manager_Test",
						"TagDescription": "",
						"When": "",
						"Skip": "",
						"Name": "",
						"Init": null,
						"Post": null,
						"Async": false
					}
				],
				"Init": null,
				"Post": null,
				"TimeSpentMs": 0
			},
			{
				"When": "",
				"Seq": 0,
				"Name": "destroy",
				"Description": "destroy system",
				"Actions": [
					{
						"Service": "workflow",
						"Action": "run",
						"Request": "app",
						"Description": "map[target:$deployTarget input:${app}]",
						"Tag": "Destroy",
						"TagIndex": "",
						"TagID": "manager_Destroy",
						"TagDescription": "",
						"When": "",
						"Skip": "",
						"Name": "",
						"Init": null,
						"Post": null,
						"Async": false
					},
					{
						"Service": "workflow",
						"Action": "run",
						"Request": {
							"pipeline": [
								{
									"Key": "stop-images",
									"Value": [
										{
											"Key": "action",
											"Value": "docker:stop-images"
										},
										{
											"Key": "images",
											"Value": [
												"mysql"
											]
										}
									]
								}
							]
						},
						"Description": "destroy system services",
						"Tag": "Destroy",
						"TagIndex": "",
						"TagID": "manager_Destroy",
						"TagDescription": "",
						"When": "",
						"Skip": "",
						"Name": "",
						"Init": null,
						"Post": null,
						"Async": false
					}
				],
				"Init": null,
				"Post": null,
				"TimeSpentMs": 0
			}
		],
		"OnErrorTask": "",
		"DeferTask": "",
		"SleepTimeMs": 0
	}
}