Workflow,,Name,Description,Tasks,,Init,,
,,mysql,manages mysql docker service,%Tasks,,@var/init,,
[]Tasks,,Name,Description,Actions,,,,
,,start,start docker mysql service,%Start,,,,
[]Start,,Service,Action,Description,Request,When,Post,
,,daemon,status,check if system mysql service is running,@req/service,$params.stopSystemMysql:true,@var/status,
,,daemon,stop,stop mysql system service,@req/service,$serviceStatus:running,,
,,storage,copy,copy config file to temp location,@req/copy,$hasConfig:1,,
[]Start,,Service,Action,Description,Request.SourceKey,Request.Cases,,
,,workflow,switch,check if custom config has been supplied,hasConfig,%RunCase,,
[]RunCase,Value,Service,Action,Description,Request,,,
,1,docker,run,run mysql $name with custom config,@req/run-with-conf,,,
,0,docker,run,run mysql $name with default config,@req/run,,,
[]Start,,Service,Action,Description,Request,,,
,,dsunit,register,register test db connection,@req/register,,,
,,workflow,goto,check if db ready,@req/goto_check,,,
[]Tasks,,,Name,Description,Actions,,,
,,,check,check if started,%Check,,,
[]Check,,Service,Action,Description,Request,Post,When,SleepTimeMs
,,dsunit,query,run test query,@req/query, @var/query_status,,
,,workflow,goto,check if db ready,@req/goto_check,,$status:/bad connection/,3000
[]Tasks,,Name,Description,Actions,,,,
,,stop,stop docker mysql,%Stop,,,,
[]Stop,Service,Action,Description,Request,,,,
,docker,stop,Stop docker mysql service,@req/stop,,,,
[]Tasks,,Name,Description,Actions,,,,
,,export,export mysql schema from docker,%Export,,,,
[]Export,Service,Action,Description,Request,,,,
,docker,exec,Export all databases,@req/export,,,,
[]Tasks,,Name,Description,Actions,,,,
,,import,load mysql dump,%Import,,,,
[]Import,Service,Action,Description,Request,,,,
,docker,exec,Import mysql dump,@req/import,,,,