Workflow,,Name,Description,Tasks,Init,
,,build,Build go app in linux docker container with custom dependencies,%Tasks,@var/init,
[]Tasks,,Name,Description,Actions,,
,,start SSHD docker,Run an docker,%Init,,
[]Init,Service,Action,Description,Request,,
,docker,run,run SSHD docker,@req/docker_run,,
,exec,run,install base packages,@req/init,,
[]Tasks,,Name,Description,Actions,,
,,buildApp,build an app,%BuildApp,,
[]BuildApp,Service,Action,Description,Request,When,
,sdk,set,set sdk,@req/sdk,,
,version/control,checkout,checkout code,@req/checkout,$origin.URL,
,storage,copy,upload custom assets,@req/upload,$Length($upload) > 0,
,exec,run,run commands,@req/cmd,,
,storage,copy,download custom assets,@req/download,$Length($download) > 0,
[]Tasks,,Name,Description,Actions,When,
,,buildImg,build app image,%BuildImg,$HasResource(${dockerfile.URL}):true,
[]BuildImg,Service,Action,Description,Request,When,Group
,storage,copy,download build dockerfile , @req/dockerfile,,
,docker,build,build app docker image, @req/build_img,,
,docker,login,login to docker registry, @req/login,$useRegistry:true,
,docker,tag,tag app image, @req/tag,$useRegistry:true,
,docker,push,push docker image to registry, @req/push,$useRegistry:true,