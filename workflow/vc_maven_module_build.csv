Workflow,,Name,Description,Tasks,Init,DeferTask,,
,,vc_maven_module_build,Workflow check outs/pulls latest change from vc to maven build it,%Tasks, @var/vc_maven_module_build_init.json,cleanup,,
[]Tasks,Step,Name,Description,Actions,,,,
,1,checkout,This task wil get the latest code and build it,%Checkout,,,,
[]Checkout,Service,Action,Description,Request,,,,
,version/control,checkout,Check out the latest code,$checkoutRequest,,,,
,transfer,copy,Copy module pom file,$transferPomRequest,,,,
[]Tasks,Step,Name,Description,Actions,,,,
,1,build,This task wil build the checked out code,%Build,,,,
[]Build,Service,Action,Description,Request,Group,SkipCriteria,Init,RunCriteria
,nop,nop,,{},mvn_setting,!$mavenSettings,,
,storage,download,Take current maven settings, @req/maven_get_active_settings,mvn_setting,,,!HasResource(${env.HOME}/.m2/settings.xml):true
,storage,upload,Backup current maven settings, @req/maven_backup_settings,mvn_setting,,,
,storage,download,Take maven supplied settings, @req/maven_get_settings,mvn_setting,,,
,storage,upload,Apply suppplied maven settings, @req/maven_set_settings,mvn_setting,,,
,build,build,Build maven artifact,$buildRequest,,,,
[]Tasks,Step,Name,Description,Actions,,,,
,1,cleanup,restores previous maven settings.xml file,%Cleanup,,,,
[]Cleanup,Service,Action,Description,Request,RunCriteria,,,
,storage,upload,Restore original maven settings, @req/maven_restore_settings.json,$originalMavenSettings,,,
,storage,remove,Remove backup settings.xml, @req/maven_remove_backup_settings.json,$originalMavenSettings,,,