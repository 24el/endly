[
  {
    "Name": "serviceInstanceName",
    "Value": "$params.serviceInstanceName"
  },
  {
    "Name": "dockerTarget",
    "Value": {
      "Name": "$params.serviceInstanceName",
      "URL": "$params.url",
      "Credential": "$params.credential"
    }
  },
  {
    "Name": "serviceInstanceName",
    "Value": "$params.serviceInstanceName"
  },
  {
    "Name": "configFile",
    "Value": "/tmp/aerospike${serviceInstanceName}.conf"
  },
  {
    "Name": "sourceConfig",
    "Value": {
      "URL": "$params.configUrl",
      "Credential": "$params.configUrlCredential"
    }
  },

  {
    "Name": "dockerRequest",
    "Value": {
      "Target": "$dockerTarget"
    }
  },

  {
    "Name": "systemDockerRequest",
    "Value": {
      "Service": "docker",
      "Target": "$dockerTarget"
    }
  },

  {
    "Name": "transferRequest",
    "Value": {
      "Transfers": [
        {
          "Source": "$sourceConfig",
          "Target": {
            "URL": "file://$configFile"
          },
          "Expand": true
        }
      ]
    }
  },
  {
    "Name": "dockerRunRequest",
    "Value": {
      "SysPath": [
        "/usr/local/bin"
      ],
      "Target": "$dockerTarget",
      "Image": "aerospike/aerospike-server:latest",
      "Mount": {
        "$configFile": "/etc/aerospike/aerospike.conf"
      },
      "MappedPort": {
        "3000": "3000",
        "3001": "3001",
        "3002": "3002",
        "3004": "3004",
        "8081": "8081"
      }
    }
  }
]