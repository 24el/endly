Workflow,,Name,Description,Tasks,,,Variables,
,,dockerized_aerospike,This workflow will setup and start aeropsike as docker service,%Tasks,,,#dockerized_aerospike_var.json,
[]Tasks,Step,Name,Description,Actions,,RunCriteria,,
,1,system_start_docker,This task wil start system docker service if it is not running,%Actions1,,,,
[]Actions1,Service,Action,Description,Request.Service,Request.Target,RunCriteria,Variables,
,system,status,Check if system docker service is running,docker,$remoteTarget,,"[{""name"":""dockerSystemStatus"", ""source"":""State"", ""scope"":""out""}]",
,system,start,Start docker service,docker,$remoteTarget,$dockerSystemStatus:/!running/,,
[]Tasks,Step,Name,Description,Actions,,RunCriteria,,
,2,prepare_config,This task will create my.cnf mysql configuration file ($params.mycnfURL),%Actions2,,,,
[]Actions2,Service,Action,Description,Request.[]Transfers,,RunCriteria,Variables,
,transfer,copy,This action will copy template config file to the temp folder,$configTransfer,,$params.confgUrl:/!params.configUrl/,,
[]Tasks,Step,Name,Description,Actions,,RunCriteria,,
,3,docker_run_aerospike,This task will start docker mysql instance,%Actions3,,,,
[]Actions3,Service,Action,Description,Request.Image,Request.Target,Request.MappedPort,Request.Mount,Request.SysPath
,docker,run,Start docker mysql service,aerospike/aerospike-server:latest,$remoteTarget,"{""3000"":""3000"", ""3001"":""3001"",""3002"":""3002"",""3004"":""3004"",""8081"":""8081""}","{""$configFile"":""/etc/aerospike/aerospike.conf""}","[""/usr/local/bin""]"